# SciGrapher.js

![license](https://img.shields.io/badge/license-MIT-green?style=plastic) ![version](https://img.shields.io/github/package-json/v/JhoselinRam/scigrapher?filename=dist%2Fpackage.json&style=plastic) ![npm](https://img.shields.io/npm/v/scigrapher?style=plastic) ![types](https://img.shields.io/npm/types/scigrapher?style=plastic) ![dependencies](https://img.shields.io/badge/dependencies-none-blue?style=plastic)

SciGrapher.js is a JavaScript/TypeScript library capable of producing high quality scientific oriented graphs on the browser with minimum configuration. It's based on the HTML canvas element to ensure high responsively and avoid overload the DOM with potentially hundreds of elements.

#### What do I mean with "scientific oriented"?

SciGrapher.js, unlike other tools like Chart.js or D3.js, is not a general purpose charting library, its goal is to accurately represent numeric data generated by mathematical equations or other (physical) sources. The resulting graphs are closer to those generated by MATLAB or Matplotlib, rather than an illustrative panel, for example.

At the moment, the library offers four chart types, including:

- Line chart, this can be used to generate dispersion graphs as well.
- Area, used to represent the area between two curves.
- Heatmap, to represent scalar fields.
- Vector field, to represent two-dimensional vector fields.
    
## Table of Contents

* [Installation](#installation)
* [Usage](#usage)
* [Graph Methods](#graph-methods)
  * [Background](#background)
  * [Axis](#axis)
  * [Grid](#grid)
  * [Labels](#labels)
  * [Events](#events)
  * [Graph Properties](#graph-properties)
* [Datasets](#datasets)
  * [Line Chart](#linechart)
    * [Line Data](#line-data)
    * [Marker](#marker)
    * [Error bars](#error-bars)
    * [Line Properties](#line-properties)   
  * [Area](#area)
    * [Area Data](#area-data)
    * [Area Properties](#area-properties) 
  * [Heatmap](#heatmap)
    * [Heatmap Data](#heatmap-data)
    * [heatmap Properties](#heatmap-properties) 
  * [Vector Field](#vector-field)
    * [Vector Field Data](#vector-field-data)
    * [Vector Field Properties](#vector-field-properties) 
 * [Colorbar](#colorbar)
 * [Legend](#legend)
 * [Extras](#extras)
 * [License](#license)

## Installation

## Usage

Each graph is controlled by a single object created by calling the `graph2D` function.

    graph2D(element)
    graph2D(element, options)

Where
* `element` is a div element.
* `options` is an object containing the [options](#graph-options) to change the default behavior and appearance of the graph.

> Note: The options object has a lot of properties and complex structure, its use is intended for copying or generate graphs from another graphs. All its properties are breake down in the `graph2D` methods, is best to use those instead.

To start, call the `graph2D` function and assign the object generated to a variable, use its methods to change the appearance and behavior to your needs and finally call the `draw` method to render the final result.
The methods can be chained.

HTML:

    <body>
       <div id="my-graph"></div>
    </body>

JS:

    const element = document.querrySelector("#my-graph");
    const graph = graph2D(element).axisPoition("center").draw();

Result:

![default_graph](/assets/images/default_graph.jpg)

Almost every method is overcharged, so you can set or get the properties, for example calling `graph.axisType()` will return the current axis type used in the graph, and calling `graph.axisType("polar")` will set the graph axis type to polar and return a reference to the same graph object, so more methods can be chained.

Additionally, almost every method accepts a callback function as a second parameter. This callback will be executed right after the graph properties are updated, but before is render to the screen.

The callback function can accept one optional parameter that represents the graph object from which the method is call upon.

> Note: The execution of the optional callback function is unique to that method call, so in order to execute that function more than ones it needs to be passed to the method on each call.

___

To add data to the graph, you need to call the `addDataset` method specifying the type of the data you intend to create, the return value can be stored in a variable to later use.

    addDataset(datatype)
    addDataset(datatype, options) 

Where:

* `datatype` is one of the data types available : "linechart", "area", "heatmap" or "vectorfield".
* `options` is an object containing the [options](#linechart-options)  to change the default behavior and appearance of the dataset.

> Note. The options object has a lot of properties and complex structure, its use is intended for copying or generate datasets from another datasets. All its properties are breake down in the corresponding dataset methods, is best to use those instead.

The resulting dataset is bound to the graph, so in order to show render the result, you must call the `draw` method of the graph after the dataset creation or any modification made to it.

Example:

    const element = document.querrySelector("#my-graph");
    const graph = graph2D(element)
		      .axisDomain({
		          x : {start : -8, end : 8},
			  y : {start : -1.2, end : 1.2}
		       })
		      .containerSize({width : 800, height : 300});
    
    const data = graph.addDataset("linechart")
		      .dataX(linspace(-8, 8, 100))
		      .dataY((dataset)=>{
		          return dataset.dataX().map(x=>Math.cos(x));
		       });

    graph.draw();

Result:

![cosine_example](/assets/images/cosine_example.jpeg)

The details on how to manipulate the datasets will be discussed in its [corresponding](#datasets) section.

## Graph Methods

### Background

#### Color:

This method returns or changes the graph background color.

*Method:*

    backgroundColor()
    backgroundColor(color)
    backgroundColor(color, callback)

*Where:*

* `color` is a string representing the background color in the format #rrggbb
 or any of the standard color names.
 * `callback` is a callback function that is run after the color is set but before the next render, this callback accepts an optional argument that represents the graph object from which the method is called upon.

*Returns:*

* A string representing the graph background color if no arguments are passed.
* A reference to the graph object from which the method is called upon.

*Default value:*

* The default value for the background color is `"#ffffff"` (white)
___

#### Opacity:

This method returns or changes the graph background opacity.

*Method:*

    backgroundOpacity()
    backgroundOpacity(opacity)
    backgroundOpacity(opacity, callback)

*Where:*

* `opacity` is a number between 0 and 1 representing the graph background opacity.
* `callback` is a callback function that is run after the opacity is set but before the next render, this callback accepts an optional argument that represents the graph object from which the method is called upon.

*Returns:*

* A number between 0 and 1 representing the graph background opacity if no arguments are passed.
* A reference to the graph object from which the method is called upon.

*Default value:*

* The default value of the background opacity is `1`

___

### Axis

#### Position:

This method returns or change the current axis position.

*Method:*

    axisPosition()
    axisPosition(position)
    axisPosition(position, callback)

*Where:*

* `position` is a string representing the axis position, the available options are:
  * "center" 
  * "bottom-left"
  * "bottom-right"
  * "top-left"
  * "top-right"
* `callback` is a callback function that is run after the axis position is set but before the next render, this callback accepts an optional argument that represents the graph object from which the method is called upon.

*Returns:*

* A string representing the current axis position if no arguments are passed.
* A reference to the graph object from which the method is called upon.

*Default value:*

*The default value for the axis position is `"center"`.

___

#### Type:

This method returns or changes the current axis type.

*Method:*

    axisType()
    axisType(type)
    axisType(type, callback)

*Where:*

* `type` is a string representing the axis type, the available options are:
  * "rectangular": Linear scales on both axis.
  * "polar": Effectively the same as `"rectangular"` but  with the grid in polar representation.
  * "x-log": Base 10 logarithmic scale on the `x` axis and linear scale on the `y` axis.
  * "y-log": Base 10 logarithmic scale on the `y` axis and linear scale on the `x` axis.
  * "log-log" Base 10 logarithmic scale on both axis.
* `callback` is a callback function that is run after the axis type is set but before the next render, this callback accepts an optional argument that represents the graph object from which the method is called upon.

> Warning: An axis cannot have a logarithmic scale set unless its domain is strictly positive or negative, in other words the axis domain must contain only positive values or only negative values not include zero.

*Returns:*

* A string representing the current axis type if no arguments are passed.
* A reference to the graph object from which the method is called upon.

*Default value:*

*The default value for the axis type is `"rectangular"`.

___

#### Domain:

This method returns or sets the current domain of each axis.
It is only necessary to define the values that you want to change and only that values will be updated, leaving the rest as they are.

*Method:*

    axisDomain()
    axisDomain(domain)
    axisDomain(domain, callback)

*Where:*

* `domain` is an object representing the axis domain, this object has the properties:
  * `x` : An object containing the properties `start` and `end`.
    * The property `start` is the value at the left most side of the `x` axis.
    * The property `end` is the value at the right most side of the `x` axis.
  * `y` : An object containing the properties `start` and `end`.
    * The property `start` is the value at the bottom of the `y` axis.
    * The property `end` is the value at the top of the `y` axis.
*  `callback` is a callback function that is run after the axis domain is set but before the next render, this callback accepts an optional argument that represents the graph object from which the method is called upon.

> Why the `end` value of the `y` axis is at the top and not the bottom? :
> Because of the convention of having the vertical axis values increase from bottom to top, this is a convention to follow for other similar properties.

> On that note, it is not necessary to have the `start` value be smaller than the `end` value. In that case, the axis "direction" will be reverted.

*Returns:*

* An object representing the current axis domain if no arguments are pass.
* A reference to the graph object from which the method is called upon.

*Default values:*

The default values for the axis domain are as follows:

    {
       x : {
          start : -5,
          end : 5
       },
       y : {
          start : -5,
          end : 5
       }
    }

___

#### Color:

This method lets you get or set the current colors of each axis base, ticks and text independently.

The `color` object has some properties that change the colors in a generalized way, and those changes cascaded towards the more specific properties. The more specific the property is, the more priority takes.

It is only necessary to define the values that you want to change and only that values will be updated, leaving the rest as they are.

*Method:*

    axisColor()
    axisColor(color)
    axisColor(color, callback)

*Where:*

* `color` is an object that represent the color of each axis base, ticks and text. This object has the following properties:
  * `axis` : a string representing the color of both whole axis.
  * `xAxis` : a string representing the color of the whole `x` axis.
  * `yAxis` : a string representing the color of the whole `y` axis.
  * `base` : and object containing the following properties:
    * `x`: a string representing the color of the `x` axis `base`.
    * `y`: a string representing the color of the `y` axis `base`.
  * `tick` : and object containing the following properties:
    * `x`: a string representing the color of the `x` axis `ticks`.
    * `y`: a string representing the color of the `y` axis `ticks`.
  * `text` : and object containing the following properties:
    * `x`: a string representing the color of the `x` axis `text`.
    * `y`: a string representing the color of the `y` axis `text`.
* `callback` is a callback function that is run after the axis color is set but before the next render, this callback accepts an optional argument that represents the graph object from which the method is called upon.

> Note: The color can be in the format "#rrggbb" or be any of the standard color names.

*Return:*

* An object representing the current axis colors if no arguments are pass.
* A reference to the graph object from which the method is called upon.

*Default values:*

The default values for the axis color are as follows:
(`"#000000"` represents the color `black`)

    {
       base : {
          x : "#000000",
          y : "#000000",
       },
       tick : {
          x : "#000000",
          y : "#000000",
       },
       text : {
          x : "#000000",
          y : "#000000",
       }
    }

___